<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>TypeTopology.AbsolutenessOfCompactnessExample</title><link rel="stylesheet" href="Agda.css"><script type="text/javascript" src="highlight-hover.js"></script></head><body><pre class="Agda"><a id="1" class="Background">Andrew Swan, started 13th February 2024

We demonstrate the upwards absoluteness of compactness, by using it to
give an alternative proof of the propositional Tychonoff theorem (as
proved in the module TypeTopology.PropTychonoff).

</a><a id="233" class="Markup">\begin{code}</a>

<a id="247" class="Symbol">{-#</a> <a id="251" class="Keyword">OPTIONS</a> <a id="259" class="Pragma">--safe</a> <a id="266" class="Pragma">--without-K</a> <a id="278" class="Symbol">#-}</a>
<a id="282" class="Keyword">open</a> <a id="287" class="Keyword">import</a> <a id="294" href="MLTT.Spartan.html" class="Module">MLTT.Spartan</a>

<a id="308" class="Keyword">import</a> <a id="315" href="Modal.Open.html" class="Module">Modal.Open</a>
<a id="326" class="Keyword">import</a> <a id="333" href="Modal.SigmaClosedReflectiveSubuniverse.html" class="Module">Modal.SigmaClosedReflectiveSubuniverse</a>

<a id="373" class="Keyword">import</a> <a id="380" href="TypeTopology.AbsolutenessOfCompactness.html" class="Module">TypeTopology.AbsolutenessOfCompactness</a>
<a id="419" class="Keyword">open</a> <a id="424" class="Keyword">import</a> <a id="431" href="TypeTopology.CompactTypes.html" class="Module">TypeTopology.CompactTypes</a>

<a id="458" class="Keyword">open</a> <a id="463" class="Keyword">import</a> <a id="470" href="UF.Equiv.html" class="Module">UF.Equiv</a>
<a id="479" class="Keyword">open</a> <a id="484" class="Keyword">import</a> <a id="491" href="UF.FunExt.html" class="Module">UF.FunExt</a>
<a id="501" class="Keyword">open</a> <a id="506" class="Keyword">import</a> <a id="513" href="UF.PropIndexedPiSigma.html" class="Module">UF.PropIndexedPiSigma</a>
<a id="535" class="Keyword">open</a> <a id="540" class="Keyword">import</a> <a id="547" href="UF.Subsingletons.html" class="Module">UF.Subsingletons</a>

<a id="565" class="Keyword">module</a> <a id="572" href="TypeTopology.AbsolutenessOfCompactnessExample.html" class="Module">TypeTopology.AbsolutenessOfCompactnessExample</a>
 <a id="619" class="Symbol">(</a><a id="620" href="TypeTopology.AbsolutenessOfCompactnessExample.html#620" class="Bound">fe</a> <a id="623" class="Symbol">:</a> <a id="625" href="UF.FunExt.html#850" class="Function">funext</a> <a id="632" href="MLTT.Universes.html#3834" class="Generalizable">ùì§</a> <a id="634" href="MLTT.Universes.html#3834" class="Generalizable">ùì§</a><a id="635" class="Symbol">)</a>
 <a id="638" class="Symbol">(</a><a id="639" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="641" class="Symbol">:</a> <a id="643" href="MLTT.Universes.html#3834" class="Generalizable">ùì§</a> <a id="645" href="MLTT.Universes.html#3977" class="Function Operator">Ãá</a> <a id="647" class="Symbol">)</a>
 <a id="650" class="Symbol">(</a><a id="651" href="TypeTopology.AbsolutenessOfCompactnessExample.html#651" class="Bound">P-is-prop</a> <a id="661" class="Symbol">:</a> <a id="663" href="UF.Subsingletons.html#469" class="Function">is-prop</a> <a id="671" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a><a id="672" class="Symbol">)</a>
 <a id="675" class="Keyword">where</a>

<a id="682" class="Markup">\end{code}</a><a id="692" class="Background">

We are given a proposition P as a parameter and function
extensionality. We use this in a sequence of module imports.

First of all, we give P to the open modality module, as well as
function extensionality to get results about the open modality on P.

</a><a id="947" class="Markup">\begin{code}</a>

<a id="961" class="Keyword">open</a> <a id="966" href="Modal.Open.html" class="Module">Modal.Open</a> <a id="977" href="TypeTopology.AbsolutenessOfCompactnessExample.html#620" class="Bound">fe</a> <a id="980" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="982" href="TypeTopology.AbsolutenessOfCompactnessExample.html#651" class="Bound">P-is-prop</a>

<a id="993" class="Markup">\end{code}</a><a id="1003" class="Background">

The open modality module gives us proofs that the open modality is
reflective and Œ£-closed. We hand these off to the
SigmaClosedReflectiveSubuniverse module.

</a><a id="1164" class="Markup">\begin{code}</a>

<a id="1178" class="Keyword">open</a> <a id="1183" href="Modal.SigmaClosedReflectiveSubuniverse.html" class="Module">Modal.SigmaClosedReflectiveSubuniverse</a>
 <a id="1223" href="Modal.Open.html#981" class="Function">open-subuniverse</a> <a id="1240" href="Modal.Open.html#2288" class="Function">open-is-reflective</a> <a id="1259" href="Modal.Open.html#2849" class="Function">open-is-sigma-closed</a>

<a id="1281" class="Markup">\end{code}</a><a id="1291" class="Background">

We also hand off the open modality as a parameter to the
AbsolutenessOfCompactness module.

</a><a id="1385" class="Markup">\begin{code}</a>

<a id="1399" class="Keyword">open</a> <a id="1404" href="TypeTopology.AbsolutenessOfCompactness.html" class="Module">TypeTopology.AbsolutenessOfCompactness</a>
 <a id="1444" href="Modal.Open.html#981" class="Function">open-subuniverse</a> <a id="1461" href="Modal.Open.html#2288" class="Function">open-is-reflective</a>

<a id="1481" class="Markup">\end{code}</a><a id="1491" class="Background">

Finally, we recall that AbsolutenessOfCompactness has a submodule that
requires the extra assumptions of function extensionality and that the
reflective subuniverse is Œ£-closed and replete. We have all of these,
so we pass them on as parameters to the submodule.

</a><a id="1757" class="Markup">\begin{code}</a>

<a id="1771" class="Keyword">open</a> <a id="1776" href="TypeTopology.AbsolutenessOfCompactness.html#10838" class="Module">WithFunExtAndRepleteSigmaClosed</a>
 <a id="1809" href="TypeTopology.AbsolutenessOfCompactnessExample.html#620" class="Bound">fe</a> <a id="1812" href="Modal.Open.html#2849" class="Function">open-is-sigma-closed</a> <a id="1833" href="Modal.Open.html#2676" class="Function">open-is-replete</a>

<a id="1850" class="Markup">\end{code}</a><a id="1860" class="Background">

If we apply the theorems in AbsolutenessOfCompactness directly, the
best we can get is the following non dependent version of
propositional Tychonoff.

</a><a id="2014" class="Markup">\begin{code}</a>

<a id="non-dependent-prop-tychonoff"></a><a id="2028" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2028" class="Function">non-dependent-prop-tychonoff</a>
 <a id="2058" class="Symbol">:</a> <a id="2060" class="Symbol">(</a><a id="2061" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2061" class="Bound">A</a> <a id="2063" class="Symbol">:</a> <a id="2065" href="TypeTopology.AbsolutenessOfCompactnessExample.html#632" class="Bound">ùì§</a> <a id="2067" href="MLTT.Universes.html#3977" class="Function Operator">Ãá</a> <a id="2069" class="Symbol">)</a>
 <a id="2072" class="Symbol">‚Üí</a> <a id="2074" class="Symbol">(</a><a id="2075" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="2077" class="Symbol">‚Üí</a> <a id="2079" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="2091" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2061" class="Bound">A</a><a id="2092" class="Symbol">)</a>
 <a id="2095" class="Symbol">‚Üí</a> <a id="2097" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="2109" class="Symbol">(</a><a id="2110" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="2112" class="Symbol">‚Üí</a> <a id="2114" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2061" class="Bound">A</a><a id="2115" class="Symbol">)</a>
<a id="2117" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2028" class="Function">non-dependent-prop-tychonoff</a> <a id="2146" class="Symbol">=</a> <a id="2148" href="TypeTopology.AbsolutenessOfCompactness.html#14417" class="Function">modalities-preserve-compact</a>

<a id="2177" class="Markup">\end{code}</a><a id="2187" class="Background">

In order to get a new proof of propositional Tychonoff, we need to
show how to derive it from the non-dependent version.

</a><a id="2311" class="Markup">\begin{code}</a>

<a id="prop-tychonoff‚ÇÇ"></a><a id="2325" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2325" class="Function">prop-tychonoff‚ÇÇ</a>
 <a id="2342" class="Symbol">:</a> <a id="2344" class="Symbol">(</a><a id="2345" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2345" class="Bound">A</a> <a id="2347" class="Symbol">:</a> <a id="2349" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="2351" class="Symbol">‚Üí</a> <a id="2353" href="TypeTopology.AbsolutenessOfCompactnessExample.html#632" class="Bound">ùì§</a> <a id="2355" href="MLTT.Universes.html#3977" class="Function Operator">Ãá</a> <a id="2357" class="Symbol">)</a>
 <a id="2360" class="Symbol">‚Üí</a> <a id="2362" class="Symbol">((</a><a id="2364" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2364" class="Bound">z</a> <a id="2366" class="Symbol">:</a> <a id="2368" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a><a id="2369" class="Symbol">)</a> <a id="2371" class="Symbol">‚Üí</a> <a id="2373" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="2385" class="Symbol">(</a><a id="2386" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2345" class="Bound">A</a> <a id="2388" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2364" class="Bound">z</a><a id="2389" class="Symbol">))</a>
 <a id="2393" class="Symbol">‚Üí</a> <a id="2395" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="2407" class="Symbol">(</a><a id="2408" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="2410" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2345" class="Bound">A</a><a id="2411" class="Symbol">)</a>
<a id="2413" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2325" class="Function">prop-tychonoff‚ÇÇ</a> <a id="2429" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="2431" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2431" class="Bound">A-compact</a> <a id="2441" class="Symbol">=</a> <a id="2443" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4479" class="Function">Œ†A-compact</a>
 <a id="2455" class="Keyword">where</a>

<a id="2462" class="Markup">\end{code}</a><a id="2472" class="Background">

We are given a family of types A : P ‚Üí ùì§ Ãá and we aim to apply the
non-dependent version above to the product Œ† A. In order to do this,
there are two things to check. Firstly, we have to show that P implies
Œ† A is compact. This allows us to apply the non-dependent version
above, which shows that P ‚Üí Œ† A is compact. We then need to deduce
from this that in fact Œ† A is compact.

The first step, of showing that P implies Œ† A compact, is copied
straight from the original propositional Tychonoff proof. Namely, if P
is true, as witnessed by an inhabitant z, then Œ† A is equivalent to A
z, and so is compact.

</a><a id="3083" class="Markup">\begin{code}</a>

  <a id="3099" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3099" class="Function">ùïó</a> <a id="3101" class="Symbol">:</a> <a id="3103" class="Symbol">(</a><a id="3104" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3104" class="Bound">z</a> <a id="3106" class="Symbol">:</a> <a id="3108" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a><a id="3109" class="Symbol">)</a> <a id="3111" class="Symbol">‚Üí</a> <a id="3113" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="3115" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="3117" href="UF.Equiv.html#1318" class="Function Operator">‚âÉ</a> <a id="3119" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="3121" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3104" class="Bound">z</a>
  <a id="3125" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3099" class="Function">ùïó</a> <a id="3127" class="Symbol">=</a> <a id="3129" href="UF.PropIndexedPiSigma.html#1195" class="Function">prop-indexed-product</a> <a id="3150" href="TypeTopology.AbsolutenessOfCompactnessExample.html#620" class="Bound">fe</a> <a id="3153" href="TypeTopology.AbsolutenessOfCompactnessExample.html#651" class="Bound">P-is-prop</a>

  <a id="3166" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3166" class="Function">product-locally-compact</a> <a id="3190" class="Symbol">:</a> <a id="3192" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="3194" class="Symbol">‚Üí</a> <a id="3196" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="3208" class="Symbol">(</a><a id="3209" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="3211" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="3212" class="Symbol">)</a>
  <a id="3216" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3166" class="Function">product-locally-compact</a> <a id="3240" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3240" class="Bound">z</a> <a id="3242" class="Symbol">=</a>
   <a id="3247" href="TypeTopology.CompactTypes.html#17610" class="Function">compact‚àô-types-are-closed-under-equiv</a>
    <a id="3289" class="Symbol">(</a><a id="3290" href="UF.Equiv.html#7797" class="Function">‚âÉ-sym</a> <a id="3296" class="Symbol">(</a><a id="3297" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3099" class="Function">ùïó</a> <a id="3299" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3240" class="Bound">z</a><a id="3300" class="Symbol">))</a> <a id="3303" class="Symbol">(</a><a id="3304" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2431" class="Bound">A-compact</a> <a id="3314" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3240" class="Bound">z</a><a id="3315" class="Symbol">)</a>

<a id="3318" class="Markup">\end{code}</a><a id="3328" class="Background">

We can now apply the non dependent version above to show that P ‚Üí Œ† A
is compact.

</a><a id="3413" class="Markup">\begin{code}</a>

  <a id="3429" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3429" class="Function">P‚ÜíŒ†A-compact</a> <a id="3442" class="Symbol">:</a> <a id="3444" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="3456" class="Symbol">(</a><a id="3457" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="3459" class="Symbol">‚Üí</a> <a id="3461" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="3463" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="3464" class="Symbol">)</a>
  <a id="3468" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3429" class="Function">P‚ÜíŒ†A-compact</a> <a id="3481" class="Symbol">=</a>
   <a id="3486" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2028" class="Function">non-dependent-prop-tychonoff</a> <a id="3515" class="Symbol">(</a><a id="3516" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="3518" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="3519" class="Symbol">)</a> <a id="3521" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3166" class="Function">product-locally-compact</a>

<a id="3546" class="Markup">\end{code}</a><a id="3556" class="Background">

To deduce that Œ† A is compact, it suffices to show that it is
equivalent to P ‚Üí Œ† A. This can be shown directly, but we will give a
slightly more abstract proof using general results about
modalities.

First note that given z : P, we known that P is true and so every type
is modal for the open modality on P. Hence, in particular A z is
modal.

</a><a id="3904" class="Markup">\begin{code}</a>

  <a id="3920" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3920" class="Function">A-modal</a> <a id="3928" class="Symbol">:</a> <a id="3930" class="Symbol">(</a><a id="3931" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3931" class="Bound">z</a> <a id="3933" class="Symbol">:</a> <a id="3935" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a><a id="3936" class="Symbol">)</a> <a id="3938" class="Symbol">‚Üí</a> <a id="3940" href="Modal.ReflectiveSubuniverse.html#538" class="Function">is-modal</a> <a id="3949" class="Symbol">(</a><a id="3950" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="3952" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3931" class="Bound">z</a><a id="3953" class="Symbol">)</a>
  <a id="3957" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3920" class="Function">A-modal</a> <a id="3965" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3965" class="Bound">z</a> <a id="3967" class="Symbol">=</a> <a id="3969" href="Modal.Open.html#3390" class="Function">P-true-implies-all-modal</a> <a id="3994" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3965" class="Bound">z</a> <a id="3996" class="Symbol">(</a><a id="3997" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="3999" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3965" class="Bound">z</a><a id="4000" class="Symbol">)</a>

<a id="4003" class="Markup">\end{code}</a><a id="4013" class="Background">

Since A is a family of modal types its product Œ† A is also modal.

</a><a id="4082" class="Markup">\begin{code}</a>

  <a id="4098" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4098" class="Function">Œ†A-modal</a> <a id="4107" class="Symbol">:</a> <a id="4109" href="Modal.ReflectiveSubuniverse.html#538" class="Function">is-modal</a> <a id="4118" class="Symbol">(</a><a id="4119" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="4121" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="4122" class="Symbol">)</a>
  <a id="4126" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4098" class="Function">Œ†A-modal</a> <a id="4135" class="Symbol">=</a>
   <a id="4140" href="Modal.ReflectiveSubuniverse.html#6477" class="Function">products-of-modal-types-are-modal</a>
    <a id="4178" href="TypeTopology.AbsolutenessOfCompactnessExample.html#620" class="Bound">fe</a> <a id="4181" href="Modal.Open.html#2676" class="Function">open-is-replete</a> <a id="4197" href="TypeTopology.AbsolutenessOfCompactnessExample.html#639" class="Bound">P</a> <a id="4199" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a> <a id="4201" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3920" class="Function">A-modal</a>

<a id="4210" class="Markup">\end{code}</a><a id="4220" class="Background">

However, the fact that Œ† A is modal precisely tells us that the unit
map of the modality Œ† A ‚Üí (P ‚Üí Œ† A) is an equivalence.

Putting this together with the earlier proof that P ‚Üí Œ† A is modal
allows us to complete the proof of the theorem.

</a><a id="4463" class="Markup">\begin{code}</a>

  <a id="4479" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4479" class="Function">Œ†A-compact</a> <a id="4490" class="Symbol">:</a> <a id="4492" href="TypeTopology.CompactTypes.html#4300" class="Function">is-compact‚àô</a> <a id="4504" class="Symbol">(</a><a id="4505" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="4507" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="4508" class="Symbol">)</a>
  <a id="4512" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4479" class="Function">Œ†A-compact</a> <a id="4523" class="Symbol">=</a>
   <a id="4528" href="TypeTopology.CompactTypes.html#17610" class="Function">compact‚àô-types-are-closed-under-equiv</a>
    <a id="4570" class="Symbol">(</a><a id="4571" href="UF.Equiv.html#7797" class="Function">‚âÉ-sym</a> <a id="4577" class="Symbol">((</a><a id="4579" href="Modal.Open.html#855" class="Function">open-unit</a> <a id="4589" class="Symbol">(</a><a id="4590" href="MLTT.Pi.html#164" class="Function">Œ†</a> <a id="4592" href="TypeTopology.AbsolutenessOfCompactnessExample.html#2429" class="Bound">A</a><a id="4593" class="Symbol">))</a> <a id="4596" href="MLTT.Sigma.html#395" class="InductiveConstructor Operator">,</a> <a id="4598" href="TypeTopology.AbsolutenessOfCompactnessExample.html#4098" class="Function">Œ†A-modal</a><a id="4606" class="Symbol">))</a>
    <a id="4613" href="TypeTopology.AbsolutenessOfCompactnessExample.html#3429" class="Function">P‚ÜíŒ†A-compact</a>

<a id="4627" class="Markup">\end{code}</a><a id="4637" class="Background">
</a></pre></body></html>