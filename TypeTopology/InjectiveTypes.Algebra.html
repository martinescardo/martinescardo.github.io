<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>InjectiveTypes.Algebra</title><link rel="stylesheet" href="Agda.css"><script type="text/javascript" src="highlight-hover.js"></script></head><body><pre class="Agda"><a id="1" class="Background">Martin Escardo, 22nd October 2024 - 22 May 2025

This file is work in progress and aims to eventually subsume the file
gist.InjectivesVersusAlgebras (at which point that file will be deleted).

We give conditions on algebraic injective structure on a type so that
it coincides with the algebraic structure for the partial-map
classifier (aka lifting) monad 𝓛 on types.

We call these conditions &quot;stability under composition&quot; and &quot;pullback
naturality&quot;.

Stability under composition says that an extension (f|j)|k of an
extension f|j is the extension f|(k∘j) along the composition of the
embeddings j and k, as in the following commutative diagram.


                   j         k
              X ──────→ Y ──────→ Z
               ╲        │        ╱
                ╲       │       ╱
             f   ╲      │ f|j  ╱ (f|j)|k = f(k∘j
                  ╲     │     ╱
                   ╲    │    ╱
                    ╲   │   ╱
                     ➘  ↓  ↙
                        D

Pullback naturality is expressed by the following diagram, where the
square is a pullback and j (and hence k) is an embedding.

                   k
              A ──────→ B
              │ ⌟       │
           g  │         │ h
              │         │
              ↓    j    ↓
              X ──────→ Y
               ╲        │
                ╲       │
             f   ╲      │ f|j ∘ h = (f ∘ g) | k
                  ╲     │
                   ╲    │
                    ╲   │
                     ➘  ↓
                        D

It actually suffices to consider pullbacks of the form


        fiber j y ────→ 𝟙
              │ ⌟       │
              │         │ y
              │         │
              ↓    j    ↓
              X ──────→ Y

One may wonder whether it is reasonable to consider naturality with
respect to all commutative squares

                   k
              A ──────→ B
              │         │
           g  │         │ h
              │         │
              ↓    j    ↓
              X ──────→ Y

where j and k are embeddings, but which are not necessarily
pullbacks. However, a counter-example is the commutative square


              𝟘 ──────→ 𝟙
              │         │
              │         │
              │         │
              ↓         ↓
              𝟙 ──────→ 𝟙

Finally, notice that 𝓛-algebraic structure is, by definition,
flabbiness structure plus an associativity law on this structure.

</a><a id="2434" class="Markup">\begin{code}</a>

<a id="2448" class="Symbol">{-#</a> <a id="2452" class="Keyword">OPTIONS</a> <a id="2460" class="Pragma">--safe</a> <a id="2467" class="Pragma">--without-K</a> <a id="2479" class="Pragma">--lossy-unification</a> <a id="2499" class="Symbol">#-}</a>

<a id="2504" class="Keyword">open</a> <a id="2509" class="Keyword">import</a> <a id="2516" href="UF.FunExt.html" class="Module">UF.FunExt</a>

<a id="2527" class="Keyword">module</a> <a id="2534" href="InjectiveTypes.Algebra.html" class="Module">InjectiveTypes.Algebra</a>
        <a id="2565" class="Symbol">(</a><a id="2566" href="InjectiveTypes.Algebra.html#2566" class="Bound">fe</a> <a id="2569" class="Symbol">:</a> <a id="2571" href="UF.FunExt.html#995" class="Function">FunExt</a><a id="2577" class="Symbol">)</a>
       <a id="2586" class="Keyword">where</a>

<a id="fe&#39;"></a><a id="2593" href="InjectiveTypes.Algebra.html#2593" class="Function">fe&#39;</a> <a id="2597" class="Symbol">:</a> <a id="2599" href="UF.FunExt.html#1047" class="Function">Fun-Ext</a>
<a id="2607" href="InjectiveTypes.Algebra.html#2593" class="Function">fe&#39;</a> <a id="2611" class="Symbol">{</a><a id="2612" href="InjectiveTypes.Algebra.html#2612" class="Bound">𝓤</a><a id="2613" class="Symbol">}</a> <a id="2615" class="Symbol">{</a><a id="2616" href="InjectiveTypes.Algebra.html#2616" class="Bound">𝓥</a><a id="2617" class="Symbol">}</a> <a id="2619" class="Symbol">=</a> <a id="2621" href="InjectiveTypes.Algebra.html#2566" class="Bound">fe</a> <a id="2624" href="InjectiveTypes.Algebra.html#2612" class="Bound">𝓤</a> <a id="2626" href="InjectiveTypes.Algebra.html#2616" class="Bound">𝓥</a>

<a id="2629" class="Keyword">open</a> <a id="2634" class="Keyword">import</a> <a id="2641" href="MLTT.Spartan.html" class="Module">MLTT.Spartan</a>
<a id="2654" class="Keyword">open</a> <a id="2659" class="Keyword">import</a> <a id="2666" href="UF.Base.html" class="Module">UF.Base</a>
<a id="2674" class="Keyword">open</a> <a id="2679" class="Keyword">import</a> <a id="2686" href="UF.Embeddings.html" class="Module">UF.Embeddings</a>
<a id="2700" class="Keyword">open</a> <a id="2705" class="Keyword">import</a> <a id="2712" href="UF.Equiv.html" class="Module">UF.Equiv</a>
<a id="2721" class="Keyword">open</a> <a id="2726" class="Keyword">import</a> <a id="2733" href="UF.EquivalenceExamples.html" class="Module">UF.EquivalenceExamples</a>
<a id="2756" class="Keyword">open</a> <a id="2761" class="Keyword">import</a> <a id="2768" href="UF.Subsingletons.html" class="Module">UF.Subsingletons</a>
<a id="2785" class="Keyword">open</a> <a id="2790" class="Keyword">import</a> <a id="2797" href="UF.Subsingletons-FunExt.html" class="Module">UF.Subsingletons-FunExt</a>
<a id="2821" class="Keyword">open</a> <a id="2826" class="Keyword">import</a> <a id="2833" href="UF.Univalence.html" class="Module">UF.Univalence</a>
<a id="2847" class="Keyword">open</a> <a id="2852" class="Keyword">import</a> <a id="2859" href="InjectiveTypes.Blackboard.html" class="Module">InjectiveTypes.Blackboard</a> <a id="2885" href="InjectiveTypes.Algebra.html#2566" class="Bound">fe</a> <a id="2888" class="Keyword">hiding</a> <a id="2895" class="Symbol">(</a><a id="2896" href="InjectiveTypes.Blackboard.html#6034" class="Function">ηΠ</a> <a id="2899" class="Symbol">;</a> <a id="2901" href="InjectiveTypes.Blackboard.html#6078" class="Function">ηΣ</a><a id="2903" class="Symbol">)</a>

<a id="2906" class="Keyword">module</a> <a id="2913" href="InjectiveTypes.Algebra.html#2913" class="Module">_</a> <a id="2915" class="Symbol">{</a><a id="2916" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a> <a id="2918" href="InjectiveTypes.Algebra.html#2918" class="Bound">𝓦</a> <a id="2920" class="Symbol">:</a> <a id="2922" href="Agda.Primitive.html#742" class="Postulate">Universe</a><a id="2930" class="Symbol">}</a>
         <a id="2941" class="Symbol">(</a><a id="2942" href="InjectiveTypes.Algebra.html#2942" class="Bound">D</a> <a id="2944" class="Symbol">:</a> <a id="2946" href="InjectiveTypes.Algebra.html#2918" class="Bound">𝓦</a> <a id="2948" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="2950" class="Symbol">)</a>
         <a id="2961" class="Symbol">(</a><a id="2962" href="InjectiveTypes.Algebra.html#2962" class="Bound">D-ainj</a> <a id="2969" class="Symbol">:</a> <a id="2971" href="InjectiveTypes.Blackboard.html#15851" class="Function">ainjective-type</a> <a id="2987" href="InjectiveTypes.Algebra.html#2942" class="Bound">D</a> <a id="2989" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a> <a id="2991" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a><a id="2992" class="Symbol">)</a>
       <a id="3001" class="Keyword">where</a>

 <a id="3009" href="InjectiveTypes.Algebra.html#3009" class="Function Operator">_∣_</a> <a id="3013" class="Symbol">:</a> <a id="3015" class="Symbol">{</a><a id="3016" href="InjectiveTypes.Algebra.html#3016" class="Bound">X</a> <a id="3018" href="InjectiveTypes.Algebra.html#3018" class="Bound">Y</a> <a id="3020" class="Symbol">:</a> <a id="3022" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a> <a id="3024" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="3026" class="Symbol">}</a> <a id="3028" class="Symbol">→</a> <a id="3030" class="Symbol">(</a><a id="3031" href="InjectiveTypes.Algebra.html#3016" class="Bound">X</a> <a id="3033" class="Symbol">→</a> <a id="3035" href="InjectiveTypes.Algebra.html#2942" class="Bound">D</a><a id="3036" class="Symbol">)</a> <a id="3038" class="Symbol">→</a> <a id="3040" class="Symbol">(</a><a id="3041" href="InjectiveTypes.Algebra.html#3016" class="Bound">X</a> <a id="3043" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="3045" href="InjectiveTypes.Algebra.html#3018" class="Bound">Y</a><a id="3046" class="Symbol">)</a> <a id="3048" class="Symbol">→</a> <a id="3050" class="Symbol">(</a><a id="3051" href="InjectiveTypes.Algebra.html#3018" class="Bound">Y</a> <a id="3053" class="Symbol">→</a> <a id="3055" href="InjectiveTypes.Algebra.html#2942" class="Bound">D</a><a id="3056" class="Symbol">)</a>
 <a id="3059" href="InjectiveTypes.Algebra.html#3059" class="Bound">f</a> <a id="3061" href="InjectiveTypes.Algebra.html#3009" class="Function Operator">∣</a> <a id="3063" href="InjectiveTypes.Algebra.html#3063" class="Bound">𝕛</a> <a id="3065" class="Symbol">=</a> <a id="3067" href="InjectiveTypes.Blackboard.html#16604" class="Function">extension&#39;</a> <a id="3078" href="InjectiveTypes.Algebra.html#2962" class="Bound">D-ainj</a> <a id="3085" href="InjectiveTypes.Algebra.html#3063" class="Bound">𝕛</a> <a id="3087" href="InjectiveTypes.Algebra.html#3059" class="Bound">f</a>

 <a id="3091" href="InjectiveTypes.Algebra.html#3091" class="Function">stability-under-composition</a> <a id="3119" class="Symbol">:</a> <a id="3121" href="InjectiveTypes.Algebra.html#2918" class="Bound">𝓦</a> <a id="3123" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="3125" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a> <a id="3127" href="Agda.Primitive.html#931" class="Primitive Operator">⁺</a> <a id="3129" href="MLTT.Universes.html#3977" class="Function Operator">̇</a>
 <a id="3132" href="InjectiveTypes.Algebra.html#3091" class="Function">stability-under-composition</a> <a id="3160" class="Symbol">=</a>
    <a id="3166" class="Symbol">{</a><a id="3167" href="InjectiveTypes.Algebra.html#3167" class="Bound">X</a> <a id="3169" href="InjectiveTypes.Algebra.html#3169" class="Bound">Y</a> <a id="3171" href="InjectiveTypes.Algebra.html#3171" class="Bound">Z</a> <a id="3173" class="Symbol">:</a> <a id="3175" href="InjectiveTypes.Algebra.html#2916" class="Bound">𝓤</a> <a id="3177" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="3179" class="Symbol">}</a> <a id="3181" class="Symbol">(</a><a id="3182" href="InjectiveTypes.Algebra.html#3182" class="Bound">f</a> <a id="3184" class="Symbol">:</a> <a id="3186" href="InjectiveTypes.Algebra.html#3167" class="Bound">X</a> <a id="3188" class="Symbol">→</a> <a id="3190" href="InjectiveTypes.Algebra.html#2942" class="Bound">D</a><a id="3191" class="Symbol">)</a> <a id="3193" class="Symbol">(</a><a id="3194" href="InjectiveTypes.Algebra.html#3194" class="Bound">𝕛</a> <a id="3196" class="Symbol">:</a> <a id="3198" href="InjectiveTypes.Algebra.html#3167" class="Bound">X</a> <a id="3200" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="3202" href="InjectiveTypes.Algebra.html#3169" class="Bound">Y</a><a id="3203" class="Symbol">)</a> <a id="3205" class="Symbol">(</a><a id="3206" href="InjectiveTypes.Algebra.html#3206" class="Bound">𝕜</a> <a id="3208" class="Symbol">:</a> <a id="3210" href="InjectiveTypes.Algebra.html#3169" class="Bound">Y</a> <a id="3212" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="3214" href="InjectiveTypes.Algebra.html#3171" class="Bound">Z</a><a id="3215" class="Symbol">)</a>
  <a id="3219" class="Symbol">→</a> <a id="3221" href="InjectiveTypes.Algebra.html#3182" class="Bound">f</a> <a id="3223" href="InjectiveTypes.Algebra.html#3009" class="Function Operator">∣</a> <a id="3225" class="Symbol">(</a><a id="3226" href="InjectiveTypes.Algebra.html#3206" class="Bound">𝕜</a> <a id="3228" href="UF.Embeddings.html#2147" class="Function Operator">∘↪</a> <a id="3231" href="InjectiveTypes.Algebra.html#3194" class="Bound">𝕛</a><a id="3232" class="Symbol">)</a> <a id="3234" href="MLTT.Id.html#1891" class="Function Operator">∼</a> <a id="3236" class="Symbol">(</a><a id="3237" href="InjectiveTypes.Algebra.html#3182" class="Bound">f</a> <a id="3239" href="InjectiveTypes.Algebra.html#3009" class="Function Operator">∣</a> <a id="3241" href="InjectiveTypes.Algebra.html#3194" class="Bound">𝕛</a><a id="3242" class="Symbol">)</a> <a id="3244" href="InjectiveTypes.Algebra.html#3009" class="Function Operator">∣</a> <a id="3246" href="InjectiveTypes.Algebra.html#3206" class="Bound">𝕜</a>

<a id="3249" class="Markup">\end{code}</a><a id="3259" class="Background">

To be continued, following gist.InjectivesVersusAlgebras.
</a></pre></body></html>