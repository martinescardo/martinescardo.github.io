<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>InjectiveTypes.Algebra</title><link rel="stylesheet" href="Agda.css"><script type="text/javascript" src="highlight-hover.js"></script></head><body><pre class="Agda"><a id="1" class="Background">Martin Escardo, 22nd October 2024 - 22 May 2025

This file is work in progress and aims to eventually subsume the file
gist.InjectivesVersusAlgebras (at which point that file will be deleted).

We give conditions on algebraic injective structure on a type so that
it coincides with the algebraic structure for the partial-map
classifier (aka lifting) monad 𝓛 on types.

We call these conditions &quot;stability under composition&quot; and &quot;pullback
naturality&quot;.

Stability under composition says that an extension (f|j)|k of an
extension f|j is the extension f|(k∘j) along the composition of the
embeddings j and k, as in the following commutative diagram.


                   j         k
              X ──────→ Y ──────→ Z
               ╲        │        ╱
                ╲       │       ╱
             f   ╲      │ f|j  ╱ (f|j)|k = f(k∘j
                  ╲     │     ╱
                   ╲    │    ╱
                    ╲   │   ╱
                     ➘  ↓  ↙
                        D


Pullback naturality is expressed by the following diagram, where the
square is a pullback.

                   k
              A ──────→ B
              │ ⌟       │
           g  │         │ h
              │         │
              ↓    j    ↓
              X ──────→ Y
               ╲        │
                ╲       │
             f   ╲      │ f|j ∘ h = (f ∘ g) | k
                  ╲     │
                   ╲    │
                    ╲   │
                     ➘  ↓
                        D


It actually suffices to consider pullbacks of the form


        fiber j y ────→ 𝟙
              │ ⌟       │
              │         │ y
              │         │
              ↓    j    ↓
              X ──────→ Y


Notice that 𝓛-algebraic structure is, by definition, flabbiness
structure plus an associativity law on this structure.

</a><a id="1825" class="Markup">\begin{code}</a>

<a id="1839" class="Symbol">{-#</a> <a id="1843" class="Keyword">OPTIONS</a> <a id="1851" class="Pragma">--safe</a> <a id="1858" class="Pragma">--without-K</a> <a id="1870" class="Pragma">--lossy-unification</a> <a id="1890" class="Symbol">#-}</a>

<a id="1895" class="Keyword">open</a> <a id="1900" class="Keyword">import</a> <a id="1907" href="UF.FunExt.html" class="Module">UF.FunExt</a>

<a id="1918" class="Keyword">module</a> <a id="1925" href="InjectiveTypes.Algebra.html" class="Module">InjectiveTypes.Algebra</a>
        <a id="1956" class="Symbol">(</a><a id="1957" href="InjectiveTypes.Algebra.html#1957" class="Bound">fe</a> <a id="1960" class="Symbol">:</a> <a id="1962" href="UF.FunExt.html#995" class="Function">FunExt</a><a id="1968" class="Symbol">)</a>
       <a id="1977" class="Keyword">where</a>

<a id="fe&#39;"></a><a id="1984" href="InjectiveTypes.Algebra.html#1984" class="Function">fe&#39;</a> <a id="1988" class="Symbol">:</a> <a id="1990" href="UF.FunExt.html#1047" class="Function">Fun-Ext</a>
<a id="1998" href="InjectiveTypes.Algebra.html#1984" class="Function">fe&#39;</a> <a id="2002" class="Symbol">{</a><a id="2003" href="InjectiveTypes.Algebra.html#2003" class="Bound">𝓤</a><a id="2004" class="Symbol">}</a> <a id="2006" class="Symbol">{</a><a id="2007" href="InjectiveTypes.Algebra.html#2007" class="Bound">𝓥</a><a id="2008" class="Symbol">}</a> <a id="2010" class="Symbol">=</a> <a id="2012" href="InjectiveTypes.Algebra.html#1957" class="Bound">fe</a> <a id="2015" href="InjectiveTypes.Algebra.html#2003" class="Bound">𝓤</a> <a id="2017" href="InjectiveTypes.Algebra.html#2007" class="Bound">𝓥</a>

<a id="2020" class="Keyword">open</a> <a id="2025" class="Keyword">import</a> <a id="2032" href="MLTT.Spartan.html" class="Module">MLTT.Spartan</a>
<a id="2045" class="Keyword">open</a> <a id="2050" class="Keyword">import</a> <a id="2057" href="UF.Base.html" class="Module">UF.Base</a>
<a id="2065" class="Keyword">open</a> <a id="2070" class="Keyword">import</a> <a id="2077" href="UF.Embeddings.html" class="Module">UF.Embeddings</a>
<a id="2091" class="Keyword">open</a> <a id="2096" class="Keyword">import</a> <a id="2103" href="UF.Equiv.html" class="Module">UF.Equiv</a>
<a id="2112" class="Keyword">open</a> <a id="2117" class="Keyword">import</a> <a id="2124" href="UF.EquivalenceExamples.html" class="Module">UF.EquivalenceExamples</a>
<a id="2147" class="Keyword">open</a> <a id="2152" class="Keyword">import</a> <a id="2159" href="UF.Subsingletons.html" class="Module">UF.Subsingletons</a>
<a id="2176" class="Keyword">open</a> <a id="2181" class="Keyword">import</a> <a id="2188" href="UF.Subsingletons-FunExt.html" class="Module">UF.Subsingletons-FunExt</a>
<a id="2212" class="Keyword">open</a> <a id="2217" class="Keyword">import</a> <a id="2224" href="UF.Univalence.html" class="Module">UF.Univalence</a>
<a id="2238" class="Keyword">open</a> <a id="2243" class="Keyword">import</a> <a id="2250" href="InjectiveTypes.Blackboard.html" class="Module">InjectiveTypes.Blackboard</a> <a id="2276" href="InjectiveTypes.Algebra.html#1957" class="Bound">fe</a> <a id="2279" class="Keyword">hiding</a> <a id="2286" class="Symbol">(</a><a id="2287" href="InjectiveTypes.Blackboard.html#6034" class="Function">ηΠ</a> <a id="2290" class="Symbol">;</a> <a id="2292" href="InjectiveTypes.Blackboard.html#6078" class="Function">ηΣ</a><a id="2294" class="Symbol">)</a>

<a id="2297" class="Keyword">module</a> <a id="2304" href="InjectiveTypes.Algebra.html#2304" class="Module">_</a> <a id="2306" class="Symbol">{</a><a id="2307" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a> <a id="2309" href="InjectiveTypes.Algebra.html#2309" class="Bound">𝓦</a> <a id="2311" class="Symbol">:</a> <a id="2313" href="Agda.Primitive.html#742" class="Postulate">Universe</a><a id="2321" class="Symbol">}</a>
         <a id="2332" class="Symbol">(</a><a id="2333" href="InjectiveTypes.Algebra.html#2333" class="Bound">D</a> <a id="2335" class="Symbol">:</a> <a id="2337" href="InjectiveTypes.Algebra.html#2309" class="Bound">𝓦</a> <a id="2339" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="2341" class="Symbol">)</a>
         <a id="2352" class="Symbol">(</a><a id="2353" href="InjectiveTypes.Algebra.html#2353" class="Bound">D-ainj</a> <a id="2360" class="Symbol">:</a> <a id="2362" href="InjectiveTypes.Blackboard.html#15851" class="Function">ainjective-type</a> <a id="2378" href="InjectiveTypes.Algebra.html#2333" class="Bound">D</a> <a id="2380" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a> <a id="2382" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a><a id="2383" class="Symbol">)</a>
       <a id="2392" class="Keyword">where</a>

 <a id="2400" href="InjectiveTypes.Algebra.html#2400" class="Function Operator">_∣_</a> <a id="2404" class="Symbol">:</a> <a id="2406" class="Symbol">{</a><a id="2407" href="InjectiveTypes.Algebra.html#2407" class="Bound">X</a> <a id="2409" href="InjectiveTypes.Algebra.html#2409" class="Bound">Y</a> <a id="2411" class="Symbol">:</a> <a id="2413" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a> <a id="2415" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="2417" class="Symbol">}</a> <a id="2419" class="Symbol">→</a> <a id="2421" class="Symbol">(</a><a id="2422" href="InjectiveTypes.Algebra.html#2407" class="Bound">X</a> <a id="2424" class="Symbol">→</a> <a id="2426" href="InjectiveTypes.Algebra.html#2333" class="Bound">D</a><a id="2427" class="Symbol">)</a> <a id="2429" class="Symbol">→</a> <a id="2431" class="Symbol">(</a><a id="2432" href="InjectiveTypes.Algebra.html#2407" class="Bound">X</a> <a id="2434" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="2436" href="InjectiveTypes.Algebra.html#2409" class="Bound">Y</a><a id="2437" class="Symbol">)</a> <a id="2439" class="Symbol">→</a> <a id="2441" class="Symbol">(</a><a id="2442" href="InjectiveTypes.Algebra.html#2409" class="Bound">Y</a> <a id="2444" class="Symbol">→</a> <a id="2446" href="InjectiveTypes.Algebra.html#2333" class="Bound">D</a><a id="2447" class="Symbol">)</a>
 <a id="2450" href="InjectiveTypes.Algebra.html#2450" class="Bound">f</a> <a id="2452" href="InjectiveTypes.Algebra.html#2400" class="Function Operator">∣</a> <a id="2454" href="InjectiveTypes.Algebra.html#2454" class="Bound">𝕛</a> <a id="2456" class="Symbol">=</a> <a id="2458" href="InjectiveTypes.Blackboard.html#16604" class="Function">extension&#39;</a> <a id="2469" href="InjectiveTypes.Algebra.html#2353" class="Bound">D-ainj</a> <a id="2476" href="InjectiveTypes.Algebra.html#2454" class="Bound">𝕛</a> <a id="2478" href="InjectiveTypes.Algebra.html#2450" class="Bound">f</a>

 <a id="2482" href="InjectiveTypes.Algebra.html#2482" class="Function">stability-under-composition</a> <a id="2510" class="Symbol">:</a> <a id="2512" href="InjectiveTypes.Algebra.html#2309" class="Bound">𝓦</a> <a id="2514" href="Agda.Primitive.html#961" class="Primitive Operator">⊔</a> <a id="2516" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a> <a id="2518" href="Agda.Primitive.html#931" class="Primitive Operator">⁺</a> <a id="2520" href="MLTT.Universes.html#3977" class="Function Operator">̇</a>
 <a id="2523" href="InjectiveTypes.Algebra.html#2482" class="Function">stability-under-composition</a> <a id="2551" class="Symbol">=</a>
    <a id="2557" class="Symbol">{</a><a id="2558" href="InjectiveTypes.Algebra.html#2558" class="Bound">X</a> <a id="2560" href="InjectiveTypes.Algebra.html#2560" class="Bound">Y</a> <a id="2562" href="InjectiveTypes.Algebra.html#2562" class="Bound">Z</a> <a id="2564" class="Symbol">:</a> <a id="2566" href="InjectiveTypes.Algebra.html#2307" class="Bound">𝓤</a> <a id="2568" href="MLTT.Universes.html#3977" class="Function Operator">̇</a> <a id="2570" class="Symbol">}</a> <a id="2572" class="Symbol">(</a><a id="2573" href="InjectiveTypes.Algebra.html#2573" class="Bound">f</a> <a id="2575" class="Symbol">:</a> <a id="2577" href="InjectiveTypes.Algebra.html#2558" class="Bound">X</a> <a id="2579" class="Symbol">→</a> <a id="2581" href="InjectiveTypes.Algebra.html#2333" class="Bound">D</a><a id="2582" class="Symbol">)</a> <a id="2584" class="Symbol">(</a><a id="2585" href="InjectiveTypes.Algebra.html#2585" class="Bound">𝕛</a> <a id="2587" class="Symbol">:</a> <a id="2589" href="InjectiveTypes.Algebra.html#2558" class="Bound">X</a> <a id="2591" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="2593" href="InjectiveTypes.Algebra.html#2560" class="Bound">Y</a><a id="2594" class="Symbol">)</a> <a id="2596" class="Symbol">(</a><a id="2597" href="InjectiveTypes.Algebra.html#2597" class="Bound">𝕜</a> <a id="2599" class="Symbol">:</a> <a id="2601" href="InjectiveTypes.Algebra.html#2560" class="Bound">Y</a> <a id="2603" href="UF.Embeddings.html#2020" class="Function Operator">↪</a> <a id="2605" href="InjectiveTypes.Algebra.html#2562" class="Bound">Z</a><a id="2606" class="Symbol">)</a>
  <a id="2610" class="Symbol">→</a> <a id="2612" href="InjectiveTypes.Algebra.html#2573" class="Bound">f</a> <a id="2614" href="InjectiveTypes.Algebra.html#2400" class="Function Operator">∣</a> <a id="2616" class="Symbol">(</a><a id="2617" href="InjectiveTypes.Algebra.html#2597" class="Bound">𝕜</a> <a id="2619" href="UF.Embeddings.html#2147" class="Function Operator">∘↪</a> <a id="2622" href="InjectiveTypes.Algebra.html#2585" class="Bound">𝕛</a><a id="2623" class="Symbol">)</a> <a id="2625" href="MLTT.Id.html#1891" class="Function Operator">∼</a> <a id="2627" class="Symbol">(</a><a id="2628" href="InjectiveTypes.Algebra.html#2573" class="Bound">f</a> <a id="2630" href="InjectiveTypes.Algebra.html#2400" class="Function Operator">∣</a> <a id="2632" href="InjectiveTypes.Algebra.html#2585" class="Bound">𝕛</a><a id="2633" class="Symbol">)</a> <a id="2635" href="InjectiveTypes.Algebra.html#2400" class="Function Operator">∣</a> <a id="2637" href="InjectiveTypes.Algebra.html#2597" class="Bound">𝕜</a>

<a id="2640" class="Markup">\end{code}</a><a id="2650" class="Background">

To be continued, following gist.InjectivesVersusAlgebras.
</a></pre></body></html>